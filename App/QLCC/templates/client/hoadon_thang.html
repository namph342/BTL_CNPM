{% extends 'layout/base.html' %}

{% block title %}H√≥a ƒë∆°n th√°ng n√†y{% endblock %}

{% block navbar %}
{% include 'layout/client_navbar.html' %}
{% endblock %}

{% block content %}
<div class="container mt-4 mb-5" style="max-width: 800px;">

    {% if invoice %}
    <div class="invoice-card">
        <div class="invoice-header">
            <h5 class="mb-0 fw-bold text-dark">H√≥a ƒë∆°n {{ invoice.created_date }}</h5>
            {% if invoice.status == 'ƒê√£ thanh to√°n' %}
                <span class="badge bg-success bg-opacity-10 text-success px-3 py-2 rounded-pill">ƒê√£ thanh to√°n</span>
            {% else %}
                <span class="badge bg-danger bg-opacity-10 text-danger px-3 py-2 rounded-pill">Ch∆∞a thanh to√°n</span>
            {% endif %}
        </div>

        <div class="invoice-body">
            <div class="bill-row">
                <div>
                    <div class="bill-label">Ti·ªÅn ƒëi·ªán</div>
                    <div class="bill-sub">{{ invoice.e_usage }}</div>
                </div>
                <div class="bill-amount">{{ invoice.e_total }} ƒë</div>
            </div>

            <div class="bill-row">
                <div>
                    <div class="bill-label">Ti·ªÅn n∆∞·ªõc</div>
                    <div class="bill-sub">{{ invoice.w_usage }}</div>
                </div>
                <div class="bill-amount">{{ invoice.w_total }} ƒë</div>
            </div>

            <div class="bill-row">
                <div>
                    <div class="bill-label">Ti·ªÅn Internet</div>
                    <div class="bill-sub">G√≥i c·ªë ƒë·ªãnh</div>
                </div>
                <div class="bill-amount">{{ invoice.net_total }} ƒë</div>
            </div>

            <div class="bill-row">
                <div>
                    <div class="bill-label">Ti·ªÅn thu√™ ph√≤ng</div>
                    <div class="bill-sub">Th√°ng n√†y</div>
                </div>
                <div class="bill-amount">{{ invoice.room_total }} ƒë</div>
            </div>

            <div class="total-row">
                <span class="total-label">T·ªïng c·ªông</span>
                <span class="total-amount">{{ invoice.final_total }} ƒë</span>
            </div>

            {% if invoice.status != 'ƒê√£ thanh to√°n' %}
            <div class="warning-box">
                <i class="bi bi-exclamation-circle-fill warning-icon"></i>
                <div>
                    <div class="fw-bold">H·∫°n thanh to√°n: {{ invoice.due_date }}</div>
                    <div class="small mt-1">Vui l√≤ng thanh to√°n tr∆∞·ªõc ng√†y {{ invoice.due_date }} ƒë·ªÉ tr√°nh ph√≠ ph·∫°t v√† gi√°n ƒëo·∫°n d·ªãch v·ª•.</div>
                </div>
            </div>

            <button class="btn-pay-now shadow-sm" data-bs-toggle="modal" data-bs-target="#paymentModal">
                Thanh to√°n ngay
            </button>
            {% else %}
            <div class="alert alert-success mt-4 text-center border-0 bg-success bg-opacity-10 text-success">
                <i class="bi bi-check-circle-fill me-2"></i> C·∫£m ∆°n b·∫°n ƒë√£ thanh to√°n h√≥a ƒë∆°n n√†y!
            </div>
            {% endif %}
        </div>
    </div>
    {% else %}
    <div class="text-center py-5">
        <img src="https://cdn-icons-png.flaticon.com/512/4076/4076432.png" width="100" class="mb-3 opacity-50">
        <h5 class="text-muted">Kh√¥ng c√≥ h√≥a ƒë∆°n n√†o c·∫ßn thanh to√°n.</h5>
    </div>
    {% endif %}

</div>

<div class="modal fade" id="paymentModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content rounded-4 border-0 shadow-lg">
            <div class="modal-header border-bottom-0 pb-0">
                <h5 class="modal-title fw-bold">Ch·ªçn ph∆∞∆°ng th·ª©c thanh to√°n</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body pt-4">
                <p class="text-muted mb-4 small">Vui l√≤ng ch·ªçn m·ªôt trong c√°c ph∆∞∆°ng th·ª©c d∆∞·ªõi ƒë√¢y ƒë·ªÉ ho√†n t·∫•t giao d·ªãch.</p>

                <div class="payment-option" onclick="selectPayment('momo')">
                    <img src="https://upload.wikimedia.org/wikipedia/vi/f/fe/MoMo_Logo.png" class="payment-logo">
                    <div>
                        <div class="fw-bold text-dark">V√≠ MoMo</div>
                        <div class="small text-muted">Qu√©t m√£ QR nhanh ch√≥ng</div>
                    </div>
                    <i class="bi bi-chevron-right ms-auto text-muted"></i>
                </div>

                <div class="payment-option" onclick="selectPayment('bank')">
                    <img src="https://cdn-icons-png.flaticon.com/512/2830/2830284.png" class="payment-logo">
                    <div>
                        <div class="fw-bold text-dark">Chuy·ªÉn kho·∫£n Ng√¢n h√†ng</div>
                        <div class="small text-muted">Vietcombank, MB, Techcom...</div>
                    </div>
                    <i class="bi bi-chevron-right ms-auto text-muted"></i>
                </div>

                <div class="payment-option" onclick="selectPayment('cash')">
                    <img src="https://cdn-icons-png.flaticon.com/512/2331/2331941.png" class="payment-logo">
                    <div>
                        <div class="fw-bold text-dark">Ti·ªÅn m·∫∑t</div>
                        <div class="small text-muted">Thu ph√≠ t·∫≠n ph√≤ng</div>
                    </div>
                    <i class="bi bi-chevron-right ms-auto text-muted"></i>
                </div>

                <div class="payment-option" onclick="selectPayment('counter')">
                    <img src="https://cdn-icons-png.flaticon.com/512/609/609803.png" class="payment-logo">
                    <div>
                        <div class="fw-bold text-dark">T·∫°i vƒÉn ph√≤ng BQL</div>
                        <div class="small text-muted">Thanh to√°n tr·ª±c ti·∫øp</div>
                    </div>
                    <i class="bi bi-chevron-right ms-auto text-muted"></i>
                </div>

                <div id="paymentDetails" class="mt-4 p-3 bg-light rounded-3 d-none">
                    <div id="momoContent" class="d-none text-center">
                        <h6 class="fw-bold text-danger">Qu√©t m√£ MoMo</h6>
                        <img src="https://upload.wikimedia.org/wikipedia/commons/d/d0/QR_code_for_mobile_English_Wikipedia.svg" width="150" class="my-2 border p-1 bg-white">
                        <div class="small">N·ªôi dung: <strong>PHONG A101 T12</strong></div>
                    </div>

                    <div id="bankContent" class="d-none">
                        <h6 class="fw-bold text-primary mb-3">Th√¥ng tin chuy·ªÉn kho·∫£n</h6>
                        <ul class="list-unstyled small mb-0">
                            <li class="mb-2">üè¶ <strong>Ng√¢n h√†ng:</strong> Vietcombank</li>
                            <li class="mb-2">üí≥ <strong>S·ªë TK:</strong> 1014686868</li>
                            <li class="mb-2">üë§ <strong>Ch·ªß TK:</strong> BAN QUAN LY</li>
                            <li>üìù <strong>N·ªôi dung:</strong> PHONG A101 T12</li>
                        </ul>
                    </div>

                    <div id="cashContent" class="d-none text-center">
                        <i class="bi bi-check-circle-fill text-success fs-1"></i>
                        <p class="mt-2 mb-0 fw-bold">ƒê√£ g·ª≠i y√™u c·∫ßu!</p>
                        <small>Nh√¢n vi√™n s·∫Ω ƒë·∫øn thu ph√≠ t·ª´ 18h-20h h√¥m nay.</small>
                    </div>

                    <div id="counterContent" class="d-none text-center">
                        <i class="bi bi-geo-alt-fill text-danger fs-1"></i>
                        <p class="mt-2 mb-0 fw-bold">VƒÉn ph√≤ng BQL T·∫ßng 1</p>
                        <small>Gi·ªù l√†m vi·ªác: 8h00 - 17h30 (T2-T7)</small>
                    </div>
                </div>

            </div>
        </div>
    </div>
</div>
{% endblock %}