{% extends 'layout/base.html' %}

{% block title %}Hợp đồng & Quy định{% endblock %}

{% block navbar %}
    {% include 'layout/client_navbar.html' %}
{% endblock %}

{% block content %}
<div class="container mt-4 mb-5" style="max-width: 1000px;">

    <div class="white-card">
        <h5 class="section-title">Thông tin hợp đồng</h5>

        {% if contract %}
        <div class="row">
            <div class="col-md-6">
                <div class="info-group">
                    <div class="info-label">Số phòng</div>
                    <div class="info-value">{{ contract.room_name }}</div>
                </div>
                <div class="info-group">
                    <div class="info-label">Ngày bắt đầu</div>
                    <div class="info-value">{{ contract.start_date }}</div>
                </div>
                <div class="info-group">
                    <div class="info-label">Tiền thuê hàng tháng</div>
                    <div class="info-value text-blue-highlight">{{ contract.room_price }}</div>
                </div>
                <div class="info-group">
                    <div class="info-label">Số người ở</div>
                    <div class="info-value">3/4 người</div> </div>
            </div>

            <div class="col-md-6">
                <div class="info-group">
                    <div class="info-label">Người thuê</div>
                    <div class="info-value">{{ current_user.name }}</div>
                </div>
                <div class="info-group">
                    <div class="info-label">Ngày kết thúc</div>
                    <div class="info-value">{{ contract.end_date }}</div>
                </div>
                <div class="info-group">
                    <div class="info-label">Tiền đặt cọc</div>
                    <div class="info-value">{{ contract.deposit }}</div>
                </div>
                 <div class="info-group">
                    <div class="info-label">Trạng thái</div>
                    <span class="badge bg-{{ contract.badge_class }} bg-opacity-10 text-{{ contract.badge_class }} px-3 py-1">
                        {{ contract.status }}
                    </span>
                </div>
            </div>
        </div>
        {% else %}
        <p class="text-muted text-center py-4">Bạn chưa có hợp đồng nào.</p>
        {% endif %}
    </div>

    <div class="white-card">
        <h5 class="section-title">Đơn giá dịch vụ hiện tại</h5>

        <div class="price-row">
            <span class="price-label">Giá điện</span>
            <span class="price-number">{{ "{:,.0f}".format(setting.electric_fee) }} đ/kWh</span>
        </div>

        <div class="price-row">
            <span class="price-label">Giá nước</span>
            <span class="price-number">{{ "{:,.0f}".format(setting.water_fee) }} đ/m³</span>
        </div>

        <div class="price-row">
            <span class="price-label">Giá Internet</span>
            <span class="price-number">{{ "{:,.0f}".format(setting.internet_fee) }} đ/tháng</span>
        </div>
    </div>

    <div class="white-card">
        <h5 class="section-title">Quy định chung cư</h5>

        {% if rules %}
            {% for rule in rules %}
            <div class="rule-row">
                <div class="rule-icon">
                    <i class="bi bi-info-circle"></i>
                </div>
                <div class="rule-content">
                    <div class="fw-bold mb-1">Quy định #{{ loop.index }}</div>
                    <div>{{ rule.content }}</div>
                </div>
            </div>
            {% endfor %}
        {% else %}
            <p class="text-muted text-center py-3">Chưa có nội quy.</p>
        {% endif %}
    </div>

</div>
{% endblock %}